<script type="text/javascript">
    $(document).ready(function () {
        $("#all").click(function () {
            var checked_status = this.checked;
            checkToggle(checked_status);
            $("#allbottom").attr("checked", checked_status);
        });
        $("#allbottom").click(function () {
            var checked_status = this.checked;
            checkToggle(checked_status);
            $("#all").attr("checked", checked_status);
        });
    });

    function checkToggle(checkStatus) {
        $(".profiles-list :checkbox").each(function () {
            this.checked = checkStatus;
        });
    }
</script>

<% has_results = (@results && @results.size > 0) %>
<% full_results = (@full_results || []).map(&:id) %>
<%= form_tag children_record_downloads_path(:format => :pdf), :method => :post do %>
    <br/>
    <div class="profiles-list child_list">
      <% if @results && @results.size > 0 %>
          <div class="pagination-box">
            <div class="page_info"><%= page_entries_info @results %></div>
          </div>

        <%= check_box_tag 'all', 'Select all records' %>
        <%= label_tag 'all',t("select_all") %>
      <% end %>
      <%= hidden_field_tag "full_results", full_results.join(",") if full_results%>

      <%= render :partial => "children/summary_row", :collection => @results, :as => :child, :locals => { :checkbox => true, :highlighted_fields => sorted_highlighted_fields } %>

      <%= render :partial => 'shared/pagination', :locals => { :results => @results } %>


    </div>
    <div class="profiles-button-wrapper">
      <% if !@results.nil? && @results.size > 0 %>
          <%= check_box_tag 'allbottom', 'Select all records' %>
          <%= label_tag 'allbottom', t("select_all") %>
      <% end %>
      <% if can? :export, Child %>
          <%= submit_tag t("child.actions.export_to_photo_wall"), :class => "submit" if has_results %>
          <%= submit_tag t("child.actions.export_to_pdf"), :class => "submit" if has_results %>
          <%= submit_tag t("child.actions.export_to_csv"), :class => "submit" if has_results %>
      <% end %>


      <div class="clearfix"></div>
      <div class="dropdown encryption_form hide">
        <form accept-charset="UTF-8" action="#" method="post">
          <input type="hidden" id="commit" name="commit" class="commit" autocomplete ="off">
          <label> <%= t('encryption.label_for_password') %> </label></p>
          <input type="password" id="password" name="password" autocomplete="off">
          <input type="submit" class="mark-as-submit" data-error-message="<%= t('children.export_error') %>" value= <%= t('children.export') %>>
        </form>
      </div>
    </div>
<% end %>

